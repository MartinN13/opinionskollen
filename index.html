<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Opinionskollen</title>
<link rel="stylesheet" href="css/sierra.min.css">
<link rel="stylesheet" href="css/style.css">
<script src="js/mithril.min.js"></script>
<script src="js/MSXTransformer.js"></script>
<script src="js/jquery-2.2.3.min.js"></script>
<script src="js/main.js"></script>
</head>

<body>

<div class="nav">
  <li><a href="#/">Översikt</a></li>
  <li><a href="#/partier">Enskilda partier</a></li>
  <li><a href="#/forandring">Översikt förändring</a></li>
  <li><a href="#/partierforandring">Enskilda partier förändring</a></li>
</div>

<div class="container">
  <div class="aligner-space-between">
    <h1 class="text-big">Opinionskollen</h1>
    <button id="hamburger" class="hamburger hamburger--elastic" type="button">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button>
  </div>
</div>

<div id="main"></div>

<script type="text/msx;harmony=true">
/* components */
var Overview = {
  data: m.prop(),

  init() {
    m.request({method: "GET", url: "json/data.json"}).then(this.data);
  },
  controller() {
    Overview.init();

    this.list = function() {
      var values = [];

      for (var i = 85; i < Overview.data().data.length; i = i + 86) {
        values.push(Overview.data().data[i]);
      };

      return values;
    };

    this.heights = function() {
      var heights = [];

      for (var i = 85; i < Overview.data().data.length; i = i + 86) {
        heights.push("height: " + Overview.data().data[i].values * 3 + "%");
      };

      return heights;
    };
  },
  view(ctrl) {
    return <div class="container aligner-center-horizontal graph">
      <div class="party v" style={ctrl.heights()[6]}>
        <p>{ctrl.list()[6].key[0]} and {ctrl.list()[6].values}</p>
      </div>
      <div class="party s" style={ctrl.heights()[5]}>
        <p>{ctrl.list()[5].key[0]} and {ctrl.list()[5].values}</p>
      </div>
      <div class="party mp" style={ctrl.heights()[7]}>
        <p>{ctrl.list()[7].key[0]} and {ctrl.list()[7].values}</p>
      </div>
      <div class="party c" style={ctrl.heights()[0]}>
        <p>{ctrl.list()[0].key[0]} and {ctrl.list()[0].values}</p>
      </div>
      <div class="party fp" style={ctrl.heights()[1]}>
        <p>{ctrl.list()[1].key[0]} and {ctrl.list()[1].values}</p>
      </div>
      <div class="party m" style={ctrl.heights()[2]}>
        <p>{ctrl.list()[2].key[0]} and {ctrl.list()[2].values}</p>
      </div>
      <div class="party kd" style={ctrl.heights()[3]}>
        <p>{ctrl.list()[3].key[0]} and {ctrl.list()[3].values}</p>
      </div>
      <div class="party sd" style={ctrl.heights()[4]}>
        <p>{ctrl.list()[4].key[0]} and {ctrl.list()[4].values}</p>
      </div>
    </div>
  }
}

m.route(document.getElementById("main"), "/", {
    "/": Overview,
});

m.route.mode = "hash";
</script>

<footer class="background-dark">
  <div class="container">
    <div class="section text-center text-small">
      <h1 class="text-big text-with-subtitle">Opinionskollen</h1>
      <p class="text-gray">v1.0.0</p>
      <p>
        <a href="#">GitHub</a>
        &nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="#">Second link</a>
        &nbsp;&nbsp;|&nbsp;&nbsp; 
        <a href="#">Third link</a>
      </p>
    </div>
  </div>
</footer>
</body>

</html>